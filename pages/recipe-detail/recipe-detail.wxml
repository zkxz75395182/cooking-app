<view class="container">
  <!-- èœè­œåœ–ç‰‡ -->
  <view class="recipe-header">
    <image class="recipe-image" src="{{recipe.image}}" mode="aspectFill"></image>
    <view class="recipe-overlay">
      <view class="recipe-title">{{recipe.name}}</view>
      <view class="recipe-tags">
        <text class="tag" wx:for="{{recipe.tags}}" wx:key="*this">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- åŸºæœ¬ä¿¡æ¯ -->
  <view class="info-section card fade-in">
    <view class="info-grid">
      <view class="info-item">
        <view class="info-icon">â±ï¸</view>
        <text class="info-label">çƒ¹é£ªæ™‚é–“</text>
        <text class="info-value">{{recipe.cookingTime}}</text>
      </view>
      <view class="info-item">
        <view class="info-icon">â­</view>
        <text class="info-label">é›£åº¦</text>
        <text class="info-value">{{recipe.difficulty}}</text>
      </view>
      <view class="info-item">
        <view class="info-icon">ğŸ‘¥</view>
        <text class="info-label">ä»½é‡</text>
        <text class="info-value">{{recipe.servings || '2äººä»½'}}</text>
      </view>
    </view>
  </view>

  <!-- ç‡Ÿé¤Šæˆåˆ† -->
  <view class="nutrition-section card fade-in">
    <view class="section-title">
      <text class="subtitle">ç‡Ÿé¤Šæˆåˆ†</text>
      <text class="per-serving">æ¯ä»½</text>
    </view>
    <view class="nutrition-grid">
      <view class="nutrition-item">
        <text class="nutrition-label">ç†±é‡</text>
        <text class="nutrition-value">{{recipe.nutrition.calories}}kcal</text>
      </view>
      <view class="nutrition-item">
        <text class="nutrition-label">è›‹ç™½è³ª</text>
        <text class="nutrition-value">{{recipe.nutrition.protein}}g</text>
      </view>
      <view class="nutrition-item">
        <text class="nutrition-label">ç¢³æ°´åŒ–åˆç‰©</text>
        <text class="nutrition-value">{{recipe.nutrition.carbs}}g</text>
      </view>
      <view class="nutrition-item">
        <text class="nutrition-label">è„‚è‚ª</text>
        <text class="nutrition-value">{{recipe.nutrition.fat}}g</text>
      </view>
      <view class="nutrition-item">
        <text class="nutrition-label">çº–ç¶­</text>
        <text class="nutrition-value">{{recipe.nutrition.fiber}}g</text>
      </view>
    </view>
  </view>

  <!-- é£Ÿæ -->
  <view class="ingredients-section card fade-in">
    <view class="subtitle">é£Ÿæ</view>
    <view class="ingredients-list">
      <view class="ingredient-item" wx:for="{{recipe.ingredients}}" wx:key="*this">
        <view class="ingredient-dot"></view>
        <text class="ingredient-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- è£½ä½œæ­¥é©Ÿ -->
  <view class="steps-section card fade-in">
    <view class="subtitle">è£½ä½œæ­¥é©Ÿ</view>
    <view class="steps-list">
      <view class="step-item" wx:for="{{recipe.steps}}" wx:key="*this">
        <view class="step-number">{{index + 1}}</view>
        <view class="step-content">
          <text class="step-text">{{item}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å°è²¼å£« -->
  <view class="tips-section card fade-in" wx:if="{{recipe.tips}}">
    <view class="subtitle">å°è²¼å£«</view>
    <view class="tips-content">
      <text class="tips-text">{{recipe.tips}}</text>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰éˆ• -->
  <view class="action-buttons fade-in">
    <button class="btn-secondary" bindtap="toggleFavorite">
      {{isFavorite ? 'â¤ï¸ å·²æ”¶è—' : 'ğŸ¤ æ”¶è—'}}
    </button>
    <button class="btn-primary" bindtap="addToDietRecord">ğŸ“ è¨˜éŒ„é£²é£Ÿ</button>
  </view>

  <!-- ç›¸é—œæ¨è–¦ -->
  <view class="related-section card fade-in" wx:if="{{relatedRecipes.length > 0}}">
    <view class="subtitle">ç›¸é—œæ¨è–¦</view>
    <view class="related-grid">
      <view class="related-item" wx:for="{{relatedRecipes}}" wx:key="id" bindtap="goToRecipe" data-id="{{item.id}}">
        <image class="related-image" src="{{item.image}}" mode="aspectFill"></image>
        <text class="related-name">{{item.name}}</text>
      </view>
    </view>
  </view>
</view> 